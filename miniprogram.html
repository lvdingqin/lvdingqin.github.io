<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>从零开始学前端 | 学习小程序</title>
    <meta name="description" content="讲述如何从零开始掌握前端开发必要知识">
    <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/9.styles.77057a7e.css" as="style"><link rel="preload" href="/assets/js/app.6c732211.js" as="script"><link rel="preload" href="/assets/js/3.ef6403a0.js" as="script"><link rel="prefetch" href="/assets/js/0.7d791175.js"><link rel="prefetch" href="/assets/js/1.092a642e.js"><link rel="prefetch" href="/assets/js/2.6af3ece0.js"><link rel="prefetch" href="/assets/js/4.20ec025f.js"><link rel="prefetch" href="/assets/js/5.c3b6790f.js"><link rel="prefetch" href="/assets/js/6.08356dad.js"><link rel="prefetch" href="/assets/js/7.aa97c25f.js"><link rel="prefetch" href="/assets/js/8.6f26d76b.js">
    <link rel="stylesheet" href="/assets/css/9.styles.77057a7e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      从零开始学前端
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.runoob.com/html/html-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link">html</a></div><div class="nav-item"><a href="https://www.runoob.com/css/css-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link">css</a></div><div class="nav-item"><a href="https://www.runoob.com/js/js-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link">javascript</a></div><div class="nav-item"><a href="http://www.runoob.com/nodejs/nodejs-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link">nodejs</a></div><div class="nav-item"><a href="http://www.runoob.com/vue2/vue-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link">vue</a></div><div class="nav-item"><a href="https://developers.weixin.qq.com/miniprogram/dev/api/" target="_blank" rel="noopener noreferrer" class="nav-link">小程序</a></div><div class="nav-item"><a href="https://developers.weixin.qq.com/minigame/dev/index.html" target="_blank" rel="noopener noreferrer" class="nav-link">小游戏</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.runoob.com/html/html-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link">html</a></div><div class="nav-item"><a href="https://www.runoob.com/css/css-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link">css</a></div><div class="nav-item"><a href="https://www.runoob.com/js/js-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link">javascript</a></div><div class="nav-item"><a href="http://www.runoob.com/nodejs/nodejs-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link">nodejs</a></div><div class="nav-item"><a href="http://www.runoob.com/vue2/vue-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link">vue</a></div><div class="nav-item"><a href="https://developers.weixin.qq.com/miniprogram/dev/api/" target="_blank" rel="noopener noreferrer" class="nav-link">小程序</a></div><div class="nav-item"><a href="https://developers.weixin.qq.com/minigame/dev/index.html" target="_blank" rel="noopener noreferrer" class="nav-link">小游戏</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>指南</span><!----></p><ul class="sidebar-group-items"><li><a href="/" class="sidebar-link">指南</a></li><li><a href="/html.html" class="sidebar-link">学习html</a></li><li><a href="/css.html" class="sidebar-link">学习css</a></li><li><a href="/javascript.html" class="sidebar-link">学习javascript</a></li><li><a href="/nodejs.html" class="sidebar-link">学习nodejs</a></li><li><a href="/vue.html" class="sidebar-link">学习vue</a></li><li><a href="/miniprogram.html" class="active sidebar-link">学习小程序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/miniprogram.html#安装框架" class="sidebar-link">安装框架</a></li><li class="sidebar-sub-header"><a href="/miniprogram.html#生成项目目录" class="sidebar-link">生成项目目录</a></li><li class="sidebar-sub-header"><a href="/miniprogram.html#开始开发" class="sidebar-link">开始开发</a></li><li class="sidebar-sub-header"><a href="/miniprogram.html#wepy框架学习" class="sidebar-link">wepy框架学习</a></li></ul></li><li><a href="/minigame.html" class="sidebar-link">学习小游戏</a></li><li><a href="/python.html" class="sidebar-link">学习python</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="学习小程序"><a href="#学习小程序" aria-hidden="true" class="header-anchor">#</a> 学习小程序</h1><p>小程序是微信提供的一种开发程序的方式，通过微信APP提供部分原生功能和依赖微信社交和支付能力接口，可以让开发者借助前端开发的知识可以快速开发出微信内的小程序以供微信用户使用，实现无需安装即可运行</p><p>微信通过重新定义wxls（类html)，wxss(类css)，js实现小程序开发</p><p>微信小程序官方提供了一个wepy框架实现了对小程序的开发，以下着重学习wepy框架</p><h2 id="安装框架"><a href="#安装框架" aria-hidden="true" class="header-anchor">#</a> 安装框架</h2><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> wepy-cli -g
</code></pre><h2 id="生成项目目录"><a href="#生成项目目录" aria-hidden="true" class="header-anchor">#</a> 生成项目目录</h2><pre class="language-bash"><code>wepy init standard 目录名
Project name 输入项目名
Project description 输入项目描述
Author 输入作者名称
Use ESLint to lint you code? Yes
Use Redux <span class="token keyword">in</span> you project Yes
Use web transform feature <span class="token keyword">in</span> your project? Yes
</code></pre><h2 id="开始开发"><a href="#开始开发" aria-hidden="true" class="header-anchor">#</a> 开始开发</h2><p>开始开发需要做3件事情</p><p>1、进入项目目录安装好依赖并开始监控目录文件和编译结果到dist目录</p><pre class="language-bash"><code><span class="token comment">#进入目录</span>
<span class="token function">cd</span> 目录名

<span class="token comment">#首次进入目录先安装项目依赖</span>
<span class="token function">npm</span> <span class="token function">install</span>

<span class="token comment">#开发监控目录修改并编译结果到dist</span>
wepy build --watch
</code></pre><p>2、下载微信开发者工具并自行安装，<a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" target="_blank" rel="noopener noreferrer">下载地址</a>，执行默认安装</p><p>打开安装好的微信开发者工具并通过微信扫码登录</p><p><img src="/assets/img/tool-login.c421ee21.png" alt="image"></p><p>选择小程序项目</p><p><img src="/assets/img/tool-choose.8ea6bad9.png" alt="image"></p><p>添加项目</p><p>项目目录：选择上面新创建的项目目录下面的dist目录</p><p>AppID：wx08e832b80b7000a8</p><p>项目名称：输出一下项目名称</p><p>点击确认</p><p><img src="/assets/img/tool-add.dacd2387.png" alt="image"></p><p>设置项目配置，点击右上角详情，选择框设置如图显示</p><p><img src="/assets/img/tool-set.a1c95758.png" alt="image"></p><p>3、打开visual studio code开发工具，选择打开目录，打开上面用npm生成的项目目录</p><p>然后修改一下代码后即可在微信开发者工具上看到修改后的效果</p><h2 id="wepy框架学习"><a href="#wepy框架学习" aria-hidden="true" class="header-anchor">#</a> wepy框架学习</h2><p>原生小程序目录结构</p><pre class="language-text"><code>project
├── pages
|   ├── index
|   |   ├── index.js    index 页面逻辑
|   |   ├── index.json  index 页面配置
|   |   ├── index.wxml  index 页面结构
|   |   └── index.wxss  index 页面样式
|   └── log
|       ├── log.js      log 页面逻辑
|       ├── log.json    log 页面配置
|       ├── log.wxml    log 页面结构
|       └── log.wxss    log 页面样式
├── app.js              小程序逻辑
├── app.json            小程序公共配置
└── app.wxss            小程序公共样式
</code></pre><p>wepy项目的目录结构</p><p>其中整个项目程序的入口为<code>src/app.wpy</code>，里面包含了小程序的一些基础配置</p><pre class="language-text"><code>├── dist                   小程序运行代码目录（该目录由WePY的build指令自动编译生成，请不要直接修改该目录下的文件）
├── node_modules           
├── src                    代码编写的目录（该目录为使用WePY后的开发目录）
|   ├── components         WePY组件目录（组件不属于完整页面，仅供完整页面或其他组件引用）
|   |   ├── com_a.wpy      可复用的WePY组件a
|   |   └── com_b.wpy      可复用的WePY组件b
|   ├── pages              WePY页面目录（属于完整页面）
|   |   ├── index.wpy      index页面（经build后，会在dist目录下的pages目录生成index.js、index.json、index.wxml和index.wxss文件）
|   |   └── other.wpy      other页面（经build后，会在dist目录下的pages目录生成other.js、other.json、other.wxml和other.wxss文件）
|   └── app.wpy            小程序配置项（全局数据、样式、声明钩子等；经build后，会在dist目录下生成app.js、app.json和app.wxss文件）
└── package.json           项目的package配置
</code></pre><p>开发规范</p><pre class="language-text"><code>变量与方法尽量使用驼峰式命名，并且注意避免使用$开头。 

小程序入口、页面、组件文件名的后缀为.wpy。 

使用ES6语法开发。 

使用Promise。 

事件绑定语法使用优化语法代替。

    原 bindtap=&quot;click&quot; 替换为 @tap=&quot;click&quot;，原catchtap=&quot;click&quot;替换为@tap.stop=&quot;click&quot;。
    原 capture-bind:tap=&quot;click&quot; 替换为 @tap.capture=&quot;click&quot;，原capture-catch:tap=&quot;click&quot;替换为@tap.capture.stop=&quot;click&quot;。
    事件传参使用优化后语法代替。 原bindtap=&quot;click&quot; data-index={{index}}替换为@tap=&quot;click({{index}})&quot;。

自定义组件命名应避开微信原生组件名称以及功能标签&lt;repeat&gt;。 不可以使用input、button、view、repeat等微信小程序原生组件名称命名自定义组件；另外也不要使用WePY框架定义的辅助标签repeat命名。有关repeat的详细信息，请参见循环列表组件引用。
</code></pre><p>页面举例</p><pre class="language-html"><code>// index.wpy格式举例

/*css部分*/
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index.less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

/*html部分*/
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>weui-cells<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">margin-top</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>weui-cell<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>weui-cell__bd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>work-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>大标题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>work-detail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>小标题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>work-org<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>备注 时间<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>weui-cell__ft<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>右侧文案<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>   
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

/*javascript部分*/
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">import</span> wepy <span class="token keyword">from</span> <span class="token string">'wepy'</span>
  <span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'../components/request'</span><span class="token punctuation">;</span>

  <span class="token comment">/*继承wepy.page代表当前模块为一个页面*/</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">wepy<span class="token punctuation">.</span>page</span> <span class="token punctuation">{</span>
    <span class="token comment">//配置小程序页面参数</span>
    config <span class="token operator">=</span> <span class="token punctuation">{</span>
      navigationBarTitleText<span class="token punctuation">:</span> <span class="token string">'首页'</span>
    <span class="token punctuation">}</span>

    components <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    mixins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token comment">//可用于页面模板绑定的数据</span>
    data <span class="token operator">=</span> <span class="token punctuation">{</span>
      userInfo<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        nickName<span class="token punctuation">:</span> <span class="token string">'加载中...'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    computed <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//事件处理函数(集中保存在methods对象中)</span>
    methods <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    events <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//页面的生命周期函数</span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> self <span class="token operator">=</span> <span class="token keyword">this</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          self<span class="token punctuation">.</span>userInfo <span class="token operator">=</span> userInfo
        <span class="token punctuation">}</span>
        self<span class="token punctuation">.</span><span class="token function">$apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre><p>wpy文件说明</p><p>.wpy文件的编译过程过下：</p><p><img src="/assets/img/wpy-comp.59dc6875.png" alt="image"></p><p>一个.wpy文件可分为三大部分，各自对应于一个标签：</p><pre class="language-text"><code>脚本部分，即&lt;script&gt;&lt;/script&gt;标签中的内容，又可分为两个部分：
    
    逻辑部分，除了config对象之外的部分，对应于原生的.js文件；

    配置部分，即config对象，对应于原生的.json文件。

结构部分，即&lt;template&gt;&lt;/template&gt;模板部分，对应于原生的.wxml文件。

样式部分，即&lt;style&gt;&lt;/style&gt;样式部分，对应于原生的.wxss文件。
</code></pre><div class="tip custom-block"><p class="custom-block-title">注意</p><p>小程序入口文件app.wpy不需要template，所以编译时会被忽略。</p><p>.wpy文件中的script、template、style这三个标签都支持lang和src属性，lang决定了其代码编译过程，src决定是否外联代码，存在src属性且有效时，会忽略内联代码。</p></div><p>项目中各脚本定义</p><p>小程序入口app.wpy</p><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> wepy <span class="token keyword">from</span> <span class="token string">'wepy'</span><span class="token punctuation">;</span>
<span class="token comment">// 声明一个App小程序实例</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MyAPP</span> <span class="token keyword">extends</span> <span class="token class-name">wepy<span class="token punctuation">.</span>app</span> <span class="token punctuation">{</span>
    customData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">customFunction</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>　<span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token function">onLaunch</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token function">onShow</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 对应 app.json 文件</span>

    globalData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">&quot;less&quot;</span><span class="token operator">&gt;</span>
<span class="token comment">/** less **/</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>入口文件app.wpy中所声明的小程序实例继承自wepy.app类</p><p>包含一个config属性和其它全局属性、方法、事件。</p><p>其中config属性对应原生的app.json文件，build编译时会根据config属性自动生成app.json文件，如果需要修改config中的内容，请使用微信提供的相关API。</p></div><p>页面page.wpy</p><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> wepy <span class="token keyword">from</span> <span class="token string">'wepy'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Counter <span class="token keyword">from</span> <span class="token string">'../components/counter'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Page</span> <span class="token keyword">extends</span> <span class="token class-name">wepy<span class="token punctuation">.</span>page</span> <span class="token punctuation">{</span>
    customData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 自定义数据</span>

    <span class="token function">customFunction</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>　<span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">//自定义方法</span>

    <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 在Page和Component共用的生命周期函数</span>

    <span class="token function">onShow</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 只在Page中存在的页面生命周期函数</span>

    config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 只在Page实例中存在的配置数据，对应于原生的page.json文件</span>

    data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 页面所需数据均需在这里声明，可用于模板数据绑定</span>

    components <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 声明页面中所引用的组件，或声明组件中所引用的子组件</span>

    mixins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 声明页面所引用的Mixin实例</span>

    computed <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 声明计算属性（详见后文介绍）</span>

    watch <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 声明数据watcher（详见后文介绍）</span>

    methods <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 声明页面wxml中标签的事件处理函数。注意，此处只用于声明页面wxml中标签的bind、catch事件，自定义方法需以自定义方法的方式声明</span>

    events <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 声明组件之间的事件处理函数</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template lang<span class="token operator">=</span><span class="token string">&quot;wxml&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>counter1<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>counter1<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">&quot;less&quot;</span><span class="token operator">&gt;</span>
<span class="token comment">/** less **/</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>页面文件page.wpy中所声明的页面实例继承自wepy.page类</p><p>属性	    说明
config	    页面配置对象，对应于原生的page.json文件，类似于app.wpy中的config
components	页面组件列表对象，声明页面所引入的组件列表
data	    页面渲染数据对象，存放可用于页面模板绑定的渲染数据
methods	    wxml事件处理函数对象，存放响应wxml中所捕获到的事件的函数，如bindtap、bindchange
events	    WePY组件事件处理函数对象，存放响应组件之间通过$broadcast、$emit、$invoke所传递的事件的函数
其它	    小程序页面生命周期函数，如onLoad、onReady等，以及其它自定义的方法与属性</p></div><p>组件com.wpy</p><pre class="language-js"><code><span class="token operator">&lt;</span>template lang<span class="token operator">=</span><span class="token string">&quot;wxml&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> wepy <span class="token keyword">from</span> <span class="token string">'wepy'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Com</span> <span class="token keyword">extends</span> <span class="token class-name">wepy<span class="token punctuation">.</span>component</span> <span class="token punctuation">{</span>
    customData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 自定义数据</span>

    <span class="token function">customFunction</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>　<span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">//自定义方法</span>

    <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 在Page和Component共用的生命周期函数</span>

    <span class="token function">onShow</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 只在Page中存在的页面生命周期函数</span>

    config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 只在Page实例中存在的配置数据，对应于原生的page.json文件</span>

    data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 页面所需数据均需在这里声明，可用于模板数据绑定</span>

    components <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 声明页面中所引用的组件，或声明组件中所引用的子组件</span>

    mixins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 声明页面所引用的Mixin实例</span>

    computed <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 声明计算属性（详见后文介绍）</span>

    watch <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 声明数据watcher（详见后文介绍）</span>

    methods <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 声明页面wxml中标签的事件处理函数。注意，此处只用于声明页面wxml中标签的bind、catch事件，自定义方法需以自定义方法的方式声明</span>

    events <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 声明组件之间的事件处理函数</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">&quot;less&quot;</span><span class="token operator">&gt;</span>
<span class="token comment">/** less **/</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>组件文件com.wpy中所声明的组件实例继承自wepy.component类，除了不需要config配置以及页面特有的一些生命周期函数之外，其属性与页面属性大致相同</p></div><p>组件引用</p><p>当页面需要引入组件或组件需要引入子组件时，必须在.wpy文件的&lt;script&gt;脚本部分先import组件文件，然后在components对象中给组件声明唯一的组件ID，接着在&lt;template&gt;模板部分中添加以components对象中所声明的组件ID进行命名的自定义标签以插入组件。</p><pre class="language-html"><code>/**
project
└── src
    ├── components
    |   └── child.wpy
    ├── pages
    |   ├── index.wpy    index 页面配置、结构、样式、逻辑
    |   └── log.wpy      log 页面配置、结构、样式、逻辑
    └──app.wpy           小程序配置项（全局公共配置、公共样式、声明钩子等）
**/

// index.wpy

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 以`&lt;script&gt;`脚本部分中所声明的组件ID为名命名自定义标签，从而在`&lt;template&gt;`模板部分中插入组件 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
    <span class="token keyword">import</span> wepy <span class="token keyword">from</span> <span class="token string">'wepy'</span><span class="token punctuation">;</span>
    <span class="token comment">//引入组件文件</span>
    <span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">'../components/child'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">wepy<span class="token punctuation">.</span>component</span> <span class="token punctuation">{</span>
        <span class="token comment">//声明组件，分配组件id为child</span>
        components <span class="token operator">=</span> <span class="token punctuation">{</span>
            child<span class="token punctuation">:</span> Child
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>组件的循环渲染</p><p>当需要循环渲染WePY组件时(类似于通过wx:for循环渲染原生的wxml标签)，必须使用WePY定义的辅助标签&lt;repeat&gt;</p><pre class="language-html"><code>/**
project
└── src
    ├── components
    |   └── child.wpy
    ├── pages
    |   ├── index.wpy    index 页面配置、结构、样式、逻辑
    |   └── log.wpy      log 页面配置、结构、样式、逻辑
    └──app.wpy           小程序配置项（全局样式配置、声明钩子等）
**/

// index.wpy

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 注意，使用for属性，而不是使用wx:for属性 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repeat</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{list}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 插入&lt;script&gt;脚本部分所声明的child组件，同时传入item --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name">:item</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repeat</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
    <span class="token keyword">import</span> wepy <span class="token keyword">from</span> <span class="token string">'wepy'</span><span class="token punctuation">;</span>
    <span class="token comment">// 引入child组件文件</span>
    <span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">'../components/child'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">wepy<span class="token punctuation">.</span>component</span> <span class="token punctuation">{</span>
        components <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token comment">// 声明页面中要使用到的Child组件的ID为child</span>
            child<span class="token punctuation">:</span> Child
        <span class="token punctuation">}</span>

        data <span class="token operator">=</span> <span class="token punctuation">{</span>
            list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'title1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'title2'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>页面可以引入组件，而组件还可以引入子组件。一个页面引入若干组件后，组件结构如下图：</p><p><img src="/assets/img/compute-tree.49e436df.png" alt="image"></p><p>computed 计算属性</p><p>computed计算属性，是一个有返回值的函数，可直接被当作绑定数据来使用。因此类似于data属性，代码中可通过this.计算属性名来引用，模板中也可通过来绑定数据。</p><p>需要注意的是，只要是组件中有任何数据发生了改变，那么所有计算属性就都会被重新计算。</p><pre class="language-js"><code>data <span class="token operator">=</span> <span class="token punctuation">{</span>
      a<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 计算属性aPlus，在脚本中可通过this.aPlus来引用，在模板中可通过{{ aPlus }}来插值</span>
  computed <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token function">aPlus</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><p>watcher 监听器</p><p>通过监听器watcher能够监听到任何属性的更新。监听器在watch对象中声明，类型为函数，函数名与需要被监听的data对象中的属性同名，每当被监听的属性改变一次，监听器函数就会被自动调用执行一次。</p><p>监听器适用于当属性改变时需要进行某些额外处理的情形。</p><pre class="language-js"><code> data <span class="token operator">=</span> <span class="token punctuation">{</span>
      num<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 监听器函数名必须跟需要被监听的data对象中的属性num同名，</span>
  <span class="token comment">// 其参数中的newValue为属性改变后的新值，oldValue为改变前的旧值</span>
  watch <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token function">num</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`num value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>oldValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> -&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 每当被监听的属性num改变一次，对应的同名监听器函数num()就被自动调用执行一次</span>
  <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token operator">++</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre><p>props 传值</p><p>props传值在WePY中属于父子组件之间传值的一种机制，包括静态传值与动态传值。</p><p>静态传值</p><p>静态传值为父组件向子组件传递常量数据，因此只能传递String字符串类型。</p><pre class="language-js"><code><span class="token operator">&lt;</span>child title<span class="token operator">=</span><span class="token string">&quot;mytitle&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>child<span class="token operator">&gt;</span>

<span class="token comment">// child.wpy</span>
props <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> String
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// mytitle</span>
<span class="token punctuation">}</span>
</code></pre><p>动态传值</p><p>在父组件template模板部分所插入的子组件标签中，使用:prop属性（等价于Vue中的v-bind:prop属性）来进行动态传值。</p><p>动态传值是指父组件向子组件传递动态数据内容，父子组件数据完全独立互不干扰。但可以通过使用.sync修饰符来达到父组件数据绑定至子组件的效果，也可以通过设置子组件props的twoWay: true来达到子组件数据绑定至父组件的效果。那如果既使用.sync修饰符，同时子组件props中添加的twoWay: true时，就可以实现数据的双向绑定了。</p><pre class="language-js"><code><span class="token comment">// parent.wpy</span>

<span class="token operator">&lt;</span>child <span class="token punctuation">:</span>title<span class="token operator">=</span><span class="token string">&quot;parentTitle&quot;</span> <span class="token punctuation">:</span>syncTitle<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">&quot;parentTitle&quot;</span> <span class="token punctuation">:</span>twoWayTitle<span class="token operator">=</span><span class="token string">&quot;parentTitle&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>child<span class="token operator">&gt;</span>

data <span class="token operator">=</span> <span class="token punctuation">{</span>
    parentTitle<span class="token punctuation">:</span> <span class="token string">'p-title'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// child.wpy</span>

props <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 静态传值</span>
    title<span class="token punctuation">:</span> String<span class="token punctuation">,</span>

    <span class="token comment">// 父向子单向动态传值</span>
    syncTitle<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'null'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    twoWayTitle<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> Number<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'nothing'</span><span class="token punctuation">,</span>
        twoWay<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// p-title</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>syncTitle<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// p-title</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>twoWayTitle<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// p-title</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'c-title'</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span>parentTitle<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// p-title.</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>twoWayTitle <span class="token operator">=</span> <span class="token string">'two-way-title'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span>parentTitle<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// two-way-title.  --- twoWay为true时，子组件props中的属性值改变时，会同时改变父组件对应的值</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span>parentTitle <span class="token operator">=</span> <span class="token string">'p-title-changed'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">$apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'c-title';</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>syncTitle<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'p-title-changed' --- 有.sync修饰符的props属性值，当在父组件中改变时，会同时改变子组件对应的值。</span>
<span class="token punctuation">}</span>
</code></pre><p>组件通信与交互</p><p>用于监听组件之间的通信与交互事件的事件处理函数需要写在组件和页面的events对象中</p><pre class="language-js"><code><span class="token keyword">import</span> wepy <span class="token keyword">from</span> <span class="token string">'wepy'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Com</span> <span class="token keyword">extends</span> <span class="token class-name">wepy<span class="token punctuation">.</span>component</span> <span class="token punctuation">{</span>
    components <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    methods <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// events对象中所声明的函数为用于监听组件之间的通信与交互事件的事件处理函数</span>
    events <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'some-event'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">,</span> $event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> receive </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>$event<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> from </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>$event<span class="token punctuation">.</span>source<span class="token punctuation">.</span>$name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// Other properties</span>
<span class="token punctuation">}</span>
</code></pre><p>$broadcast</p><p>$broadcast事件是由父组件发起，所有子组件都会收到此广播事件，除非事件被手动取消。</p><p><img src="/assets/img/broadcast.b011256f.png" alt="image"></p><p>$emit</p><p>$emit与$broadcast正好相反，事件发起组件的所有祖先组件会依次接收到$emit事件。</p><p><img src="/assets/img/emit.d1578fd6.png" alt="image"></p><p>$invoke</p><p>$invoke是一个页面或组件对另一个组件中的方法的直接调用，通过传入组件路径找到相应的组件，然后再调用其方法。</p><pre class="language-js"><code><span class="token comment">//页面Page_Index中调用组件ComA的某个方法</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$invoke</span><span class="token punctuation">(</span><span class="token string">'ComA'</span><span class="token punctuation">,</span> <span class="token string">'someMethod'</span><span class="token punctuation">,</span> <span class="token string">'someArgs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//组件ComA中调用组件ComG的某个方法</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$invoke</span><span class="token punctuation">(</span><span class="token string">'./../ComB/ComG'</span><span class="token punctuation">,</span> <span class="token string">'someMethod'</span><span class="token punctuation">,</span> <span class="token string">'someArgs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/vue.html" class="prev">
          学习vue
        </a></span><span class="next"><a href="/minigame.html">
          学习小游戏
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/3.ef6403a0.js" defer></script><script src="/assets/js/app.6c732211.js" defer></script>
  </body>
</html>
